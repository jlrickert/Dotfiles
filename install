#!/bin/bash

set -e

log() {
    echo "Running: $@"
    exec "$@"
}

_have() { type "$1" &>/dev/null; }

if _have pip3; then
    PIP=pip3
elif _have pip; then
    PIP=pip
fi

export PATH="$PATH:~/.local/bin:$PWD/dots/scripts"

if _have ansible; then
    log "$PIP" install --user ansible
fi

log ansible-galaxy collection install -r requirements.yml

